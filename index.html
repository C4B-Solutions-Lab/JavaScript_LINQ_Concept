<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8" />
  <meta name="description" content="JavaScript LINQ Concept by C4B Solutions Lab | Łukasz Dąbrowski - Inżynier Oprogramowania | Lukasz Dabrowski - Software Engineer" />
  <title>JLC 1.0 by Solutions</title>
  <script src="js/jlc.js"></script>
  <script src="js/user-defined-functions.js"></script>
  <link href="css/css_jlc.css" rel="stylesheet">
 </head>
 <body>
	<div class="content">
		<div id="readme">
			Clear the cache . Open the console . Hit Ctrl+R
		</div>
		<div class="author"></div>
	</div>

	<script>
		var coll_1 = [
			{id: 1, name : "Object 1", ne : {ne_id : 1, ne_name : "NO 1"}, valid : true, lite : false, descr : "Descr 1", quality : "A"},
			{id: 2, name : "Object 2", ne : {ne_id : 2, ne_name : "NO 2"}, valid : true, lite : false, descr : "Descr 2", quality : "A"},
			{id: 3, name : "Object 3", valid : false},
			{id: 4, name : "Object 4", ne : {ne_id : 4, ne_name : "NO 4"}, valid : true, lite : false, descr : "Descr 4", quality : "B"},
			{id: 5, name : "Object 5", ne : {ne_id : 5, ne_name : "NO 5"}, valid : true, lite : false, descr : "Descr 5", quality : "A"},
			{id: 6, name : "Object 6", ne : {ne_id : 6, ne_name : "NO 6"}, valid : true, lite : false, descr : "Descr 6", quality : "C"},
			{id: 7, name : "Object 7", ne : {ne_id : 7, ne_name : "NO 7"}, valid : true, lite : false, descr : "Descr 7", quality : "D"},
			{id: 8, name : "Object 8", ne : {ne_id : 8, ne_name : "NO 8"}, valid : true, lite : false, descr : "Descr 8", quality : "E"},
			{id: 9, name : "Object 9", ne : {ne_id : 9, ne_name : "NO 9"}, valid : true, lite : true, descr : "Descr 9", quality : "F"},
			{id: 10, name : "Object 4", ne : {ne_id : 10, ne_name : "NO 10"}, valid : true, lite : true, descr : "Descr 4", quality : "A"}

		];

		var coll_2 = [
			{id: 100, name : "Object 100", ne : {ne_id : 100, ne_name : "NO 100"}, valid : true, lite : false, descr : "Descr 100", quality : "A 100"},
			{id: 200, name : "Object 200", ne : {ne_id : 200, ne_name : "NO 200"}, valid : true, lite : false, descr : "Descr 200", quality : "A 200"}
		];		

		// var examplaryEmptyObject = {id: undefined, name : undefined, weight : 1234, ne : {ne_id : undefined, ne_name : undefined, weight : 5678}, valid : undefined};

		/**
		 * Here we create a shared instance (by initializing JLC before the very first usage) that can be reused across all the examples
		 *  
		 *  THIS IMPLEMENTATION PHILOSOPHY IS ABANDONED IN FAVOR OF MORE LOGICAL AND PRACTICAL WAY TO BETTER GO IN LINE WITH C#'s LINQ !
		*/
		// var jlc_Shared_Instance = jlc.Querying.initializeOver(coll_1);
		
		debugger;

		console.log("1. where(), first() and last()");
		var where_1 = coll_1.useLINQ().where(
											[
												["id", ">", 1.1, true],
												["ne.ne_id", ">", 1.5, true],
												["id", "<>", "-1"],
												["id", "()", true],
												["valid", "(!)", true],
												jlc_filters.myFilter1.bind(null, 1.9, 10)
											]
									);

		var first_1 = where_1.first();

		var last_1 = where_1.last();

		console.log(where_1.resultsView.dataYield);
		console.log(first_1);
		console.log(last_1);
		console.log("~1. where(), first() and last()");

		// or in case you don't wanna use JLC, simply process collection 'coll_1' using your third-party implementation ! :-)
		var my_where_1 = jlc_filters.whereFilter(coll_1);




		/**
		 *
		 * 
		 * 					HO - HO - HO :-)
		 * 					
		 * 					TAKE IT EASY, TRANSFERRING LINQ FROM C# IT'S NOT A TWO-DAY LIBRARY !
		 * 
		 * 
		 *  
		*/




		/*
		 * This is to-be-implemented during next DPRs (Dirty Point Release)
		 * This will allow for achieving the correct flow in the case 5. in this index.html file.
		 * 
		 * The goal is to allow this "partial" 'where_1' query to be kind of logically "freezed" (preserving the current data state)
		 * and subsequently resume it for further processing like in the case of example 5. in this index.html file
		 * 
		 * In plain programming English, this will allow for singleton JLC instance to be used across whole execution. 
		*/
		//var partialQueryToken = where_1.resultsView.freeze(); // preserve the state of 'where_1' query by freezing the data state and obtaining the token.


		console.log("2. where -> ResultsView | using shared instance of JLC | over same collection with additional filter");
		var where_2 = jlc_Shared_Instance
									.over(coll_1)
									.where(
											[
												["id", ">", 1.1, true],
												["ne.ne_id", ">", 1.5, true],
												["id", "<>", "-1"],
												["id", "()", true],
												["valid", "(!)", true],
												jlc_filters.myFilter1.bind(null, 1.9, 10),
												["name", "<>", "Object 6"]
											]
									);
		console.log(where_2.resultsView.historyIndex);
		console.log(where_2.resultsView.dataYield);
		console.log("~2. where -> ResultsView | using shared instance of JLC | over same collection with additional filter");


		console.log("3. first | using shared instance of JLC");
		var first_1 = jlc_Shared_Instance
									.where(
											[
												["id", ">", 1.1, true],
												["ne.ne_id", ">", 1.5, true],
												["id", "<>", "-1"],
												["id", "()", true],
												["valid", "(!)", true],
												jlc_filters.myFilter1.bind(null, 1.9, 10)
											]
									)
									.first(
											[
												["id", ">=", 2]
											]
									);
		console.log(first_1);
		console.log("~3. first | using shared instance of JLC");


		console.log("4. first | using shared instance of JLC | over new collection");
		var first_2 = jlc_Shared_Instance
									.over(coll_2)
									.where(
											[
												["id", ">", 1.1, true],
												jlc_filters.myFilter1.bind(null, 1.9, 1000)
											]
									)
									.first(
											[
												["id", ">=", 200]
											]
									);
		console.log(first_2);
		console.log("~4. first | using shared instance of JLC | over new collection");


		console.log("5. first | reusing already created where-like partial query from example 1. called where_1");
		console.log(where_1.resultsView.historyIndex);
		console.log(where_1.resultsView.dataYield);
		// get the token of "partial" query called 'where_1' named 'partialQueryToken' and use it to resume flow of data preserved in example 1.
		// var first_3 = where_1.resultsView.continue(partialQueryToken).first([  ["id", ">=", 2] ]);

		// this example doesn't resume from where 'where_1' query was kind logically suspended !
		var first_3 = where_1
									.first(
											[
												["id", ">=", 2]
											]
									);
		console.log(first_3);
		console.log("~5. first | reusing already created where-like partial query from example 1. called where_1");


/*
		console.log("first or default");

		var jlc_3 = jlc.Factory.Querying.createNew();
		var firstOrDefault = jlc_3
								 .over(coll_1)
								 .where(
											[
												["id", ">", 1.1, true],
												["ne.ne_id", ">", 1.5, true],
												["id", "<>", "-1"],
												["id", "()", true],
												["valid", "(!)", true],
												jlc_filters.myFilter1.bind(null, 1.9, 10)
											]
								 )
								 .firstOrDefault(
												  [
												  	["id", ">=", 2]
												  ]
								 );
		console.log(firstOrDefault);

		console.log("~first or default");



		console.log("last");

		var jlc_4 = jlc.Factory.Querying.createNew();
		var last = jlc_4
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						)
						.last(
								[
									["id", ">=", 2]
								]
						);
		console.log(last);

		console.log("~last");



		console.log("last or default");

		var jlc_5 = jlc.Factory.Querying.createNew();						
		var lastOrDefault = jlc_5
								.over(coll_1)
								.where(
										[
											["id", ">", 1.1, true],
											["ne.ne_id", ">", 1.5, true],
											["id", "<>", "-1"],
											["id", "()", true],
											["valid", "(!)", true],
											jlc_filters.myFilter1.bind(null, 1.9, 10)
										]
								)
								.lastOrDefault(
												 [
												 	["id", ">=", 2]
												 ]
								);

		console.log(lastOrDefault);

		console.log("~last or default");



		console.log("single");

		var jlc_6 = jlc.Factory.Querying.createNew();
		var single = jlc_6
						 .over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						)
						.single(
								[
									["id", "===", 5]
								]
						);
		console.log(single);

		console.log("~single");



		console.log("single or default");

		var jlc_7 = jlc.Factory.Querying.createNew();
		var singleOrDefault = jlc_7
								  .over(coll_1, examplaryEmptyObject, true)
								  .where(
											[
												["id", ">", 1.1, true],
												["ne.ne_id", ">", 1.5, true],
												["id", "<>", "-1"],
												["id", "()", true],
												["valid", "(!)", true],
												jlc_filters.myFilter1.bind(null, 1.9, 10)
											]
								  )
								  .singleOrDefault(
													[
														["id", "===", 5]
													]
								  );
		console.log(singleOrDefault);

		console.log("~single or default");



		console.log("all list");

		var jlc_8 = jlc.Factory.Querying.createNew();
		var all_list = jlc_8
							 .over(coll_1)
							 .where(
										[
											["id", ">", 1.1, true],
											["ne.ne_id", ">", 1.5, true],
											["id", "<>", "-1"],
											["id", "()", true],
											["valid", "(!)", true],
											jlc_filters.myFilter1.bind(null, 1.9, 10)
										]
							 )
							 .toArray(
										[
											["name", "===", "Object 4"]
										],
										false // don't yield the result
							 )
							 .all(
									[
										jlc_filters.myFilter2.bind(null, 0)
									]
							 );
		console.log(all_list);

		console.log("~ all list");



		console.log("any list");

		var jlc_9 = jlc.Factory.Querying.createNew();
		var any_list = jlc_9
							 .over(coll_1)
							 .where(
										[
											["id", ">", 1.1, true],
											["ne.ne_id", ">", 1.5, true],
											["id", "<>", "-1"],
											["id", "()", true],
											["valid", "(!)", true],
											jlc_filters.myFilter1.bind(null, 1.9, 10)
										]
							 )
							 .toArray(
										[
											["name", "===", "Object 4"]
										],
										false // don't yield the result
							 )
							 .any(
									[
										jlc_filters.myFilter2.bind(null, 0)
									]
							 );
		console.log(any_list);

		console.log("~ any list");


		console.log("empty list");

		var jlc_10 = jlc.Factory.Querying.createNew();
		var empty_list = jlc_10
							 .over([])
							 .where(
										[
											["id", ">", 1.1, true],
											["ne.ne_id", ">", 1.5, true],
											["id", "<>", "-1"],
											["id", "()", true],
											["valid", "(!)", true],
											jlc_filters.myFilter1.bind(null, 1.9, 10),
											["name", "===", "Object 4"]
										]
							 )
							 .toArray();
		console.log(empty_list.resultsView());

		empty_list = empty_list.all(
										[
											["id", ">", 0]
										]
								   );
		console.log(empty_list);
		
		console.log("~ empty list");



		console.log("reverse");

		var jlc_11 = jlc.Factory.Querying.createNew();
		var reverse = jlc_11
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						).reverse();
		console.log(reverse.resultsView());
		
		console.log("~ reverse");



		console.log("skip");

		var jlc_12 = jlc.Factory.Querying.createNew();
		var skip = jlc_12
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						).skip(10);
		console.log(skip.resultsView());
		
		console.log("~ skip");


		console.log("skipWhile");

		var jlc_13 = jlc.Factory.Querying.createNew();
		var skipWhile = jlc_13
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						)
						.skipWhile(
									[
										["lite", "===", false]
									]
						);
		console.log(skipWhile.resultsView());
		
		console.log("~ skipWhile");


		console.log("take");

		var jlc_14 = jlc.Factory.Querying.createNew();
		var take = jlc_14
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						)
						.take(2);
		console.log(take.resultsView());
		
		console.log("~ take");


		console.log("takeWhile");

		var jlc_13 = jlc.Factory.Querying.createNew();
		var takeWhile = jlc_13
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 10)
								]
						)
						.takeWhile(
									[
										["lite", "===", false]
									]
						);
		console.log(takeWhile.resultsView());
		
		console.log("~ takeWhile");


		console.log("orderBy");

		console.log(coll_1);
		var jlc_14 = jlc.Factory.Querying.createNew();
		var orderBy = jlc_14
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 100)
								]
						)
						.orderBy(
									[
										["name", true]
									]
						);
		console.log(orderBy.resultsView());

		console.log("~ orderBy");


		console.log("orderByDescending");

		console.log(coll_1);
		var jlc_15 = jlc.Factory.Querying.createNew();
		var orderByDescending = jlc_15
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 100)
								]
						)
						.orderByDescending(
									[
										["name", true],
										[" - ", false],
										["ne.ne_id", true],
										["id", true]
									]
						);
		console.log(orderByDescending.resultsView());

		console.log("~ orderByDescending");


		console.log("orderBy and thenByDescending");
		
		console.log(coll_1);
		var jlc_16 = jlc.Factory.Querying.createNew();
		var orderByAndThenByDescending = jlc_16
						.over(coll_1)
						.where(
								[
									["id", ">", 1.1, true],
									["ne.ne_id", ">", 1.5, true],
									["id", "<>", "-1"],
									["id", "()", true],
									["valid", "(!)", true],
									jlc_filters.myFilter1.bind(null, 1.9, 100)
								]
						)
						.orderBy(
											[
												["name", true]
											]
						)
						.thenByDescending(
											[
												["id", true]
											]
						)
						.thenBy(
											[
												["quality", true]
											]
						);						
		console.log(orderByAndThenByDescending.resultsView());

		console.log("~ orderBy and thenByDescending");

	*/
	</script>
 </body>
</html>